# StrongSwan IPsec Configuration for AWS-S2S-VPN
# Generated by VPN Optimizer

config setup
    charondebug="ike 2, knl 2, cfg 2, net 2, esp 2, dmn 2, mgr 2"
    uniqueids=never

# Tunnel 1 to AWS
conn AWS-S2S-VPN-tunnel1
    auto=start
    left=%defaultroute
    leftid=52.21.9.119
    leftsubnet=0.0.0.0/0
    leftupdown=/etc/strongswan.d/aws-updown.sh
    right=3.33.130.199
    rightsubnet=0.0.0.0/0
    
    # IKE Configuration
    ikelifetime=28800s
    keylife=3600s
    rekeymargin=540s
    keyingtries=%forever
    keyexchange=ikev2
    
    # Authentication
    authby=secret
    
    # Phase 1 (IKE)
    ike=aes256-sha256-modp2048!
    
    # Phase 2 (ESP)
    esp=aes256-sha256-modp2048!
    
    # Dead Peer Detection
    dpddelay=10s
    dpdtimeout=30s
    dpdaction=restart
    
    # Advanced Options
    mobike=yes
    closeaction=restart
    type=tunnel
    compress=no
    mark=%unique

# Tunnel 2 to AWS
conn AWS-S2S-VPN-tunnel2
    also=AWS-S2S-VPN-tunnel1
    right=166.117.27.198
    mark=%unique
